<!--pages/word-list/word-list.wxml-->
<view class="container">
  <!-- 顶部导航栏 -->
  <view class="word-list-header fade-in-element fade-delay-1 {{wordListLoaded ? 'show' : ''}}">
    <view class="title-info-container">
      <view class="word-list-title">{{currentDictName}}</view>
      <view class="word-count-info">共 {{filteredWordList.length || wordList.length}} 个单词</view>
    </view>
    <view class="filter-button" bindtap="showFilterModal">
      <image src="../../images/icons/change.png" class="filter-icon"></image>
    </view>
  </view>

  <!-- 单词列表 -->
  <scroll-view scroll-y class="word-list-scroll fade-in-element fade-delay-2 {{wordListLoaded ? 'show' : ''}}">
    <view class="word-list-container">
      <block wx:for="{{filteredWordList || wordList}}" wx:key="index">
        <view class="word-card">
          <!-- 顶部区域：主要单词信息 -->
          <view class="word-item-top">
            <view class="word-info">
              <view class="word-main">{{item.kanji || item.kana}}</view>
              <view class="word-type {{item.type}}">{{item.type}}</view>
            </view>
          </view>
          
          <!-- 底部区域：详细信息 -->
          <view class="word-item-bottom">
            <!-- 第一行：假名和中文详细信息 -->
            <view class="word-basic-info">
              假名：{{item.kana}}{{item.meaning ? ' | 中文：' + item.meaning : ''}}
            </view>
            
            <!-- 第二行：例句和课程号 -->
            <view class="word-example-row">
              <view class="word-example">
                {{item.example ? '例句：' + item.example : ''}}
              </view>
              <view class="word-lesson">第{{item.lesson}}课</view>
            </view>
          </view>
        </view>
      </block>
    </view>
  </scroll-view>

  <!-- 筛选弹窗 -->
  <view class="filter-modal" wx:if="{{showFilterModal}}" bindtap="hideFilterModal">
    <view class="filter-content" catchtap="stopPropagation">
      <view class="filter-header">
        <text class="filter-title">筛选单词</text>
        <view class="close-button" bindtap="hideFilterModal">×</view>
      </view>
      <view class="filter-options">
        <view class="filter-option {{filterType === 'all' ? 'selected' : ''}}" bindtap="selectFilter" data-type="all">
          <text>全部单词</text>
        </view>
        <view class="filter-option {{filterType === 'kana' ? 'selected' : ''}}" bindtap="selectFilter" data-type="kana">
          <text>仅假名</text>
        </view>
        <view class="filter-option {{filterType === 'kanji' ? 'selected' : ''}}" bindtap="selectFilter" data-type="kanji">
          <text>有汉字</text>
        </view>
        <view class="filter-option {{filterType === 'example' ? 'selected' : ''}}" bindtap="selectFilter" data-type="example">
          <text>有例句</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部白色渐变遮罩 -->
  <view class="bottom-gradient-mask"></view>
</view> 