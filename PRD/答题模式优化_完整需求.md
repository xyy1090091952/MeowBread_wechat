# 答题模式优化 - 完整需求文档

## 版本历史
- 2024-06-09: 基础答题验证逻辑
- 2024-06-10: 详细UI和功能优化
- 2024-06-11: 词性tag和题型选择功能
- 2024-06-16: 多选功能和样式调整

---

## 1. 基础答题验证逻辑 (2024-06-09)

### 1.1 答案验证机制
- 提交答案后验证答案是否正确
- 用户输入的答案与「假名」或「汉字」任意字段比对成功就算正确

### 1.2 正确答案处理
- 若正确，显示正确的答案卡，同时提交答案的按钮变成「下一题」

### 1.3 错误答案处理
- 若错误，显示正确的答案卡，同时提交答案的按钮变成「下一题」

### 1.4 跳过功能
- 在提交按钮的旁边需要有一个「跳过本题」的按钮

---

## 2. 详细UI和功能优化 (2024-06-10)

### 2.1 题库筛选优化
- **全局影响**: 题库筛选应当是答题tab下的全局影响，该筛选的调整，会影响快速答题和无尽模式下的答题范围
- **按钮文案**: 在完成选择之后，其二级页面的底部按钮应该是「完成选择」而不是现在的开始答题
- **状态显示**: 在答题tab的一级页面中题库筛选的按钮中可以显示当前选择的题库范围

### 2.2 快速答题优化
- **Debug清理**: 填空题的debug提示需要去掉
- **按钮布局**: 「跳过本题」和「提交答案」按钮希望左右并列保持在同一行，同时放在页面底部的固定位置（可能会和答案卡的位置有冲突，需要调整UI）
- **计时显示**: 「用时」字段在答题的过程中需要显示计时
- **填空题调整**: 填空题的提问需要调整，希望用户填空的是「假名」或「汉字」（这两个都算对），而不是「中文」

### 2.3 词性标签系统
无论选择题或者填空题，在题干中，希望能在单词旁边显示单词的词性tag，调用数据库中的「词性」字段，不同类型的词性的tag需要有不同的颜色：

```css
/* 词性标签颜色 */
.part-of-speech-tag.动词 {
    background-color: #598BF1;
}

.part-of-speech-tag.自动词 {
    background-color: #39D763;
}

.part-of-speech-tag.他动词 {
    background-color: #FAAD3A;
}

.part-of-speech-tag.名词 {
    background-color: #B79EFF;
}

.part-of-speech-tag.形容词 {
    background-color: #F56593;
}

.part-of-speech-tag.副词 {
    background-color: #FF375C;
}

.part-of-speech-tag.助词 {
    background-color: #5bc0de;
}

.part-of-speech-tag.连词 {
    background-color: #aa66cc;
}

.part-of-speech-tag.形容动词 {
    background-color: #17a2b8;
}

.part-of-speech-tag.代词 {
    background-color: #6f42c1;
}

.part-of-speech-tag.数词 {
    background-color: #fd7e14;
}

/* 默认词性标签样式 */
.part-of-speech-tag {
    background-color: #6c757d;
}
```

### 2.4 答案卡字段调整
提交回答后的答案卡中的字段显示需要调整顺序和名称，从上到下应该是：
1. 「假名」
2. 「汉字」
3. 「中文」
4. 「例句」
5. 「词性」（同样适用tag样式）

### 2.5 无尽答题模式
- **题目数量**: 无尽模式会把当前课程范围内的全部题目都做一遍，不做快速答题模式下的30题限制
- **功能一致性**: 该模式下，除了题目数量不做30题的限制外，和快速答题模式一致，请保持代码简洁

---

## 3. 词性tag和题型选择功能 (2024-06-11)

### 3.1 Answer页修改
- 在顶部新增banner模块，图片位置放在了images下的banner文件夹下

### 3.2 Quiz页修改
- 词性tag的位置，希望调整一下，安插在单词之后，而不是在整个题目的最后面

### 3.3 Filter页修改
- **功能分类**: 在filter页（也就是题库筛选页）新增「题型选择」功能，原有的选择辞典和选择课程保留，可以归类为"词库选择"

- **题型选择功能**: 可以针对填空题和选择题的题型进行修改，具体格式如下：
  
  **选择题:**
  - 根据中文意思选日语单词（4选1）
  - 根据日语选中文（4选1）
  
  **填空题:**
  - 根据中文意思写日语单词
  - 根据日文汉字写假名（单词这两个字段不为空）

- **开关控制**: 上述四个类型的题目，允许开关以调整出题类型，但是至少保留一个开启
- **全局影响**: 「题型选择」的结果和「词库选择」一样，将会影响全局题目类型，包括快速答题和无尽模式

---

## 4. 多选功能和样式调整 (2024-06-16)

### 4.1 Filter页的修改
- **多选功能**: 词库选择增加多选功能，同一个教材下的课程可以被多选
- **布局调整**: 题型选择的部分，调整到「词库筛选」前

### 4.2 Answer页的样式修改
「当前选择」的词库文案，合并到「题库筛选」按钮内，同时精简文字展示：（该修改也应该同步到quiz页顶部的current-filter-display）

- **全选情况**: 「当前选择：梁老师的课 - 全部课程」
- **单独选中**: 「当前选择：梁老师的课 - lesson18」
- **连续的多选**: 「当前选择：梁老师的课程 - lesson18-24」
- **非连续的多选**: （比如12，14，16，21，24，25的情况）「当前选择：梁老师的课程 - 6个课时」

### 4.3 页面标题
- Answer页，顶部增加主标题和副标题「Meow Bread」和「记忆の面包」

---

## 实现优先级

### 高优先级
1. 基础答题验证逻辑
2. 按钮布局和交互优化
3. 词性标签系统

### 中优先级
1. 题型选择功能
2. 多选功能
3. 文案和样式调整

### 低优先级
1. Banner模块
2. 页面标题优化
3. 无尽模式细节调整